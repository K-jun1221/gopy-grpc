version: '3.7'
services:
  ml_nn:
    build: ./ml
    ports:
          - 50051:50051
    environment:
      GRPC_PORT: "50051"
      MODEL_TYPE: "nn"
  ml_svm:
    build: ./ml
    ports:
          - 50052:50052
    environment:
      GRPC_PORT: "50052"
      MODEL_TYPE: "svm"
  server:
    build: ./server
    depends_on:
      - ml_nn
    ports:
      - 8080:8080
    environment:
      GRPC_HOST: "ml_nn"
      GRPC_PORT: "50051"
      GRPC_HOST2: "ml_svm"
      GRPC_PORT2: "50052"
      GO_PORT: "8080"
      
  
